<div class="container mt-5" *ngIf="product">
  <button (click)="goBack()" class="btn btn-secondary mb-3">Back</button>

  <div class="row">
    <div class="col-md-6">
      <img
        *ngIf="product.images && product.images.length > 0; else noImage"
        [src]="product.images[0]"
        alt="{{ product.title }}"
        class="img-fluid rounded"
      />
      <ng-template #noImage>
        <p>No image available</p>
      </ng-template>
    </div>
    <div class="col-md-6">
      <h2 class="mb-3">{{ product.title || "No title available" }}</h2>
      <p>
        <strong>Category:</strong>
        {{ product.category || "No category available" }}
      </p>
      <p>
        <strong>Description:</strong>
        {{ product.description || "No description available" }}
      </p>
      <p><strong>Price:</strong> ${{ product.price || "N/A" }}</p>
      <p>
        <strong>Rating:</strong>
        {{ product.ratingAverage | number : "1.1-1" }} ({{
          product.ratingCount
        }}
        ratings)
      </p>

      <!-- Rate the product -->
      <div *ngIf="product">
        <h5>Rate this product:</h5>
        <div>
          <button
            *ngFor="let star of [1, 2, 3, 4, 5]"
            (click)="submitRating(star)"
            class="btn btn-light"
          >
            {{ star }} ‚≠ê
          </button>
        </div>
      </div>

      <a class="btn btn-success mt-5" (click)="addToCart(product._id)"
        >Add to Cart</a
      >

      <!-- Alert -->
      <div *ngIf="alertVisible" class="alert alert-success mt-3" role="alert">
        {{ alertMessage }}
      </div>
    </div>
  </div>
</div>

<div *ngIf="!product" class="mt-3">
  <p>Loading product details...</p>
</div>
